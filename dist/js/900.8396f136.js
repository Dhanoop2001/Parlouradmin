"use strict";(self["webpackChunkparlouradmin"]=self["webpackChunkparlouradmin"]||[]).push([[900],{2900:function(s,e,r){r.r(e),r.d(e,{default:function(){return M}});var i=r(6768),a=r(5130),o=r(4232);const l={class:"login-container"},t={class:"form-group"},n={class:"form-group password-group"},d={class:"password-container"},u=["type"],p=["aria-label"],c={key:0,class:"error-message"},h={class:"form-group"},g=["disabled"],m={class:"form-group forgot-password"},w=["disabled"],b={key:0,class:"error-message"},k={class:"modal-actions"},L=["disabled"],y=["disabled"];function E(s,e,r,E,P,f){return(0,i.uX)(),(0,i.CE)("div",l,[e[14]||(e[14]=(0,i.Lk)("h2",{class:"login-heading"},"Log In",-1)),(0,i.Lk)("form",{class:"login-form",onSubmit:e[4]||(e[4]=(0,a.D$)(((...s)=>f.handleLogin&&f.handleLogin(...s)),["prevent"]))},[(0,i.Lk)("div",t,[e[10]||(e[10]=(0,i.Lk)("label",{for:"email"},"Email",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=s=>P.email=s),placeholder:"Enter your email",required:""},null,512),[[a.Jo,P.email]])]),(0,i.Lk)("div",n,[e[11]||(e[11]=(0,i.Lk)("label",{for:"password"},"Password",-1)),(0,i.Lk)("div",d,[(0,i.bo)((0,i.Lk)("input",{type:P.isPasswordVisible?"text":"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=s=>P.password=s),placeholder:"Enter your password",required:""},null,8,u),[[a.hp,P.password]]),(0,i.Lk)("button",{type:"button",class:"password-toggle",onClick:e[2]||(e[2]=(...s)=>f.togglePasswordVisibility&&f.togglePasswordVisibility(...s)),"aria-label":P.isPasswordVisible?"Hide password":"Show password"},[(0,i.Lk)("i",{class:(0,o.C4)(P.isPasswordVisible?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,p)])]),P.error?((0,i.uX)(),(0,i.CE)("div",c,(0,o.v_)(P.error),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",h,[(0,i.Lk)("button",{type:"submit",class:"login-button",disabled:P.isLoading},(0,o.v_)(P.isLoading?"Logging in...":"Log In"),9,g)]),(0,i.Lk)("div",m,[(0,i.Lk)("span",null,[(0,i.Lk)("a",{href:"#",onClick:e[3]||(e[3]=(0,a.D$)(((...s)=>f.openForgotPasswordModal&&f.openForgotPasswordModal(...s)),["prevent"]))},"Forgot Password?")])])],32),P.isModalVisible?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"modal-overlay",onClick:e[9]||(e[9]=(...s)=>f.closeModal&&f.closeModal(...s))},[(0,i.Lk)("div",{class:"modal-content",onClick:e[8]||(e[8]=(0,a.D$)((()=>{}),["stop"]))},[e[12]||(e[12]=(0,i.Lk)("h3",null,"Reset Your Password",-1)),e[13]||(e[13]=(0,i.Lk)("p",null,"Please enter your email address to receive password reset instructions.",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":e[5]||(e[5]=s=>P.resetEmail=s),placeholder:"Enter your email",required:"",disabled:P.isResetting},null,8,w),[[a.Jo,P.resetEmail]]),P.resetError?((0,i.uX)(),(0,i.CE)("div",b,(0,o.v_)(P.resetError),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",k,[(0,i.Lk)("button",{onClick:e[6]||(e[6]=(...s)=>f.handlePasswordReset&&f.handlePasswordReset(...s)),class:"reset-button",disabled:P.isResetting},(0,o.v_)(P.isResetting?"Sending...":"Send Reset Link"),9,L),(0,i.Lk)("button",{onClick:e[7]||(e[7]=(...s)=>f.closeModal&&f.closeModal(...s)),class:"close-button",disabled:P.isResetting}," Close ",8,y)])])])):(0,i.Q3)("",!0)])}r(4114);var P=r(782),f=r(4373),v={name:"AdminLogin",data(){return{isPasswordVisible:!1,email:"",password:"",isModalVisible:!1,resetEmail:"",error:null,resetError:null,isLoading:!1,isResetting:!1}},methods:{...(0,P.i0)(["loginUser"]),togglePasswordVisibility(){this.isPasswordVisible=!this.isPasswordVisible},async handleLogin(){if(this.email&&this.password){this.error=null,this.isLoading=!0;try{await this.loginUser({email:this.email,password:this.password}),this.$router.push("/admin-panel")}catch(s){console.error("Login error:",s),401===s.response?.status?this.error="Invalid email or password.":429===s.response?.status?this.error="Too many login attempts. Please try again later.":this.error="An error occurred during login. Please try again."}finally{this.isLoading=!1}}else this.error="Please enter both email and password."},openForgotPasswordModal(){this.isModalVisible=!0,this.resetError=null,this.resetEmail=this.email},closeModal(){this.isResetting||(this.isModalVisible=!1,this.resetEmail="",this.resetError=null)},async handlePasswordReset(){if(this.resetEmail){this.resetError=null,this.isResetting=!0;try{await f.A.post("/admin/reset-password",{email:this.resetEmail}),alert(`Password reset email has been sent to ${this.resetEmail}`),this.closeModal()}catch(s){console.error("Password reset error:",s),404===s.response?.status?this.resetError="Email address not found.":429===s.response?.status?this.resetError="Too many reset attempts. Please try again later.":this.resetError="Failed to send reset email. Please try again."}finally{this.isResetting=!1}}else this.resetError="Please enter a valid email address."}}},V=r(1241);const C=(0,V.A)(v,[["render",E],["__scopeId","data-v-6720d05a"]]);var M=C}}]);
//# sourceMappingURL=900.8396f136.js.map